stages:
  - setup
  - test

setup:
  stage: setup
  image: node:18
  script:
    - apt-get update -qq && apt-get install -y --no-install-recommends chromium
    - npm ci

test:
  stage: test
  image: node:18
  script:
    - export PATH="./node_modules/.bin:$PATH"
    - chmod +x ./node_modules/.bin/ng
    - ./node_modules/.bin/ng version
    - ./node_modules/.bin/ng test --watch=false --browsers=ChromeHeadless
