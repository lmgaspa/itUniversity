stages:
  - build
  - test
  - sonarqube
  - deploy

variables:
  BASE_DIR: "${CI_PROJECT_DIR}/frontend"  # Altere o caminho conforme o seu projeto
  SONAR_HOST_URL: "http://192.168.0.101:9000"
  SONAR_LOGIN: "${SONAR_TOKEN}"  # Usando a vari√°vel configurada no GitLab

build-job:
  stage: build
  image: node:lts 
  script:
    - npm install
    - npm run build

sonarqube-job:
  stage: sonarqube
  script:
    - cd ${BASE_DIR}
    - sonar-scanner -Dsonar.projectKey=frontend -Dsonar.host.url=${SONAR_HOST_URL} -Dsonar.login=${SONAR_LOGIN}
