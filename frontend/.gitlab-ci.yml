stages:
  - setup
  - test

setup:
  stage: setup
  image: node:18
  script:
    - apt-get update -qq && apt-get install -y --no-install-recommends chromium
    - npm ci

test:
  stage: test
  image: node:18
  script:
    - export CHROME_BIN="/usr/bin/chromium"
    - echo "Verificando Angular CLI:"
    - npx ng version || npm install --save-dev @angular/cli
    - ./node_modules/.bin/ng test --watch=false --browsers=ChromeHeadless
